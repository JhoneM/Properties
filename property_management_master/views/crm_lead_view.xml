<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    
    <record id="crm_lead_form_view_inherit" model="ir.ui.view">
        <field name="name">crm.lead.form.view.inherit</field>
        <field name="model">crm.lead</field>
        <field name="priority" eval="2" />
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            
            <xpath expr="//form/sheet/div/h2" position="replace">
                <field name="probability" invisible="1"/>
            </xpath>
            <xpath expr="//label[@for='phone']" position="replace">
                <label for="mobile"/>
            </xpath>
            <xpath expr="//group[@name='opportunity_partner']/div[2]" position="replace">
                <div class="o_row o_row_readonly">
                    <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger" title="This phone number is blacklisted for SMS Marketing. Click to unblacklist." type="object" context="{'default_phone': mobile}" groups="base.group_user" attrs="{'invisible': [('mobile_blacklisted', '=', False)]}"/>
                    <field name="mobile" widget="phone" string="Mobile"/>
                </div>
            </xpath>
            <xpath expr="//group[@name='opportunity_partner']" position="after">
                <group name="company_info">
                    <field name="user_id" string="Agente"/>
                    <field name="team_id" string="Sucursal"/>
                    <field name="company_id" string="Compañía"/>
                </group>
            </xpath>
            <xpath expr="/form/sheet/group/group[6]" position="replace">
            </xpath>
            <xpath expr="//group[@name='company_info']" position="after">
                <group name = "operation_type">
                    <field name="requeriment_date"/>
                    <label for="real_estate_lease" string="Tipo de operación"/>
                    <div>
                        <label for="real_estate_lease" string="Arriendo" style="width: 30% !important;"/>
                        <field name="real_estate_lease" class="oe_inline" />
                            &#x2063; &#x2063;
                        <label for="real_estate_sale" string="Venta" style="width: 30% !important;"/>
                        <field name="real_estate_sale" class="oe_inline" />
                    </div>
                    <field name="type_id"/>
                </group>
            </xpath>
            <xpath expr="//group[@name='opportunity_info']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='priority']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>  
            <xpath expr="//field[@name='date_deadline']" position="before">
                <label for="sale_price" attrs="{'invisible': [('real_estate_sale', '=', False)]}"/>
                <div>
                    <field name="sale_price" class="oe_inline" style="width: 30% !important;" attrs="{'invisible': [('real_estate_sale', '=', False)]}" />
                    &#x2063; &#x2063;
                    <field name="sale_price_currency" options="{'no_create_edit': True, 'no_open':True}" nolabel="1" style="width: 30% !important;" class="oe_inline" attrs="{'invisible': [('real_estate_sale', '=', False)]}" />
                </div>
                <label for="lease_price" attrs="{'invisible': [('real_estate_lease', '=', False)]}"/>
                <div>
                    <field name="lease_price" class="oe_inline" style="width: 30% !important;" attrs="{'invisible': [('real_estate_lease', '=', False)]}" />
                    &#x2063; &#x2063;
                    <field name="lease_price_currency" options="{'no_create_edit': True, 'no_open':True}" nolabel="1" style="width: 30% !important;" class="oe_inline" attrs="{'invisible': [('real_estate_lease', '=', False)]}" />
                </div>
                <field name="referred_employee"/>
            </xpath>

            <xpath expr="//form/sheet/notebook/page[@name='internal_notes']" position="replace">
                <page string="Necesidades" name="needs">
                <group>
                <group>
                    <label for="bedroom_min" string="Dormitorios"/>
                    <div>
                        <label for="bedroom_min" string="Min." style="width: 8% !important;"/>
                        <field name="bedroom_min" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <label for="bedroom_max" string="Max." style="width: 8% !important;"/>
                        <field name="bedroom_max" class="oe_inline" style="width: 20% !important;"/>
                    </div>
                    <label for="bathroom_min" string="Baños"/>
                    <div>
                        <label for="bathroom_min" string="Min." style="width: 8% !important;"/>
                        <field name="bathroom_min" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <label for="bathroom_max" string="Max." style="width: 8% !important;"/>
                        <field name="bathroom_max" class="oe_inline" style="width: 20% !important;"/>
                    </div>
                    <label for="total_area_min" string="Superficie total"/>
                    <div>
                        <label for="total_area_min" string="Min." style="width: 8% !important;"/>
                        <field name="total_area_min" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <label for="total_area_max" string="Max." style="width: 8% !important;"/>
                        <field name="total_area_max" class="oe_inline" style="width: 20% !important;"/>
                    </div>
                    
                    <label for="sale_price_min" attrs="{'invisible': [('real_estate_sale', '=', False)]}" string="Precio de venta"/>
                    <div>
                        <label for="sale_price_min" attrs="{'invisible': [('real_estate_sale', '=', False)]}" string="Min." style="width: 8% !important;"/>
                        <field name="sale_price_min" attrs="{'invisible': [('real_estate_sale', '=', False)]}" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <label for="sale_price_max" attrs="{'invisible': [('real_estate_sale', '=', False)]}" string="Max." style="width: 8% !important;"/>
                        <field name="sale_price_max" attrs="{'invisible': [('real_estate_sale', '=', False)]}" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <field name="sale_price_currency" attrs="{'invisible': [('real_estate_sale', '=', False)]}" style="width: 15% !important;" class="oe_inline"/>
                    </div>
                    <label for="lease_price_min" attrs="{'invisible': [('real_estate_lease', '=', False)]}" string="Precio de arriendo"/>
                    <div>
                        <label for="lease_price_min" attrs="{'invisible': [('real_estate_lease', '=', False)]}" string="Min." style="width: 8% !important;"/>
                        <field name="lease_price_min" attrs="{'invisible': [('real_estate_lease', '=', False)]}" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <label for="lease_price_max" attrs="{'invisible': [('real_estate_lease', '=', False)]}" string="Max." style="width: 8% !important;"/>
                        <field name="lease_price_max" attrs="{'invisible': [('real_estate_lease', '=', False)]}" class="oe_inline" style="width: 20% !important;"/>
                            &#x2063; &#x2063;
                        <field name="lease_price_currency" attrs="{'invisible': [('real_estate_lease', '=', False)]}" style="width: 15% !important;" class="oe_inline"/>
                    </div>
                    <field name="characteristics" widget="many2many_tags" style="width: 80% !important;"/>
                    </group>
                    <group>
                        <label for="street" string="Dirección"/>
                        <div>
                            <field name="city" placeholder="Región" class="oe_inline" style="width: 25% !important;"/>
                                &#x2063; &#x2063;
                            <field name="state_id" class="oe_inline" style="width: 40% !important;" placeholder="Comuna" options="{&quot;no_open&quot;: True}" context="{'country_id': country_id, 'zip': zip}"/>
                                &#x2063; &#x2063;
                            <field name="zip" placeholder="C.P." class="oe_inline" style="width: 20% !important;"/>
                                &#x2063; &#x2063;
                            <field name="country_id" placeholder="País" class="oe_inline" style="width: 100% !important;" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                        </div>
                    </group>
                    <group>
                    <button name="search_propertys" string="Buscar" type="object" class="oe_highlight"/>
                    </group>
                </group>
                </page>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='lead']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='needs']" position="after">
                <group string="Propiedades">
                    <field name="property_ids" nolabel="1">
                        <tree editable="1">
                            <field name="name" width="10" readonly="1" />
                            <field name="address" width="10" readonly="1" />
                            <field name="image_1920" string="Imagen" class="oe_left oe_avatar" widget="image"/>                            
                            <field name="price" width="10" readonly="1" />
                            <field name="attributes" width="10" readonly="1" />
                            <field name="previous_evaluation" widget="priority" string="Valoración previa" width="10" readonly="1" force_save="1"/>
                            <field name="visits" width="10" readonly="0"/>
                            <field name="visits_date" width="10" readonly="0"/>
                            <field name="pivot_evaluation" widget="priority" invisible="1" force_save="1"/>
                            <field name="evaluation" widget="priority" width="10" string="Valoración"/>
                            <field name="visits_order" widget="binary" width="10"/>
                        </tree>
                    </field>
                </group>
            </xpath>

        </field>
    </record>

</odoo>
